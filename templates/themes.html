<!-- Profile page -->
<html>
    <head>
        <title>Profile</title>
        <link rel="stylesheet" type="text/css" href={{ url_for("static", filename="style.css")}} />
        <style>
            a, p, h1, h2 {
              color: #{{ prefs['accent_color'] }}; !important;
            }
            div, .server-entry, .channel-entry {
              background-color: #{{ prefs['primary_color'] }}; !important;
            }
            .top-divider {
              border-bottom: 1px solid #{{ prefs['accent_color'] }}; !important;
            }
            .bottom-divider {
              border-top: 1px solid #{{ prefs['accent_color'] }}; !important;
            }
            button {
              background-color: #{{ prefs['accent_color'] }}; !important;
              color: #{{ prefs['primary_color'] }}; !important;
            }
            button:hover {
              filter: brightness(0.8); !important;
            }
        </style>
    </head>
    <body>
    <div id="theme-modal" class="modal-background">
        <div class="modal">
            <form class="create-form" action="{{ "/api/" + request.cookies.get('uid') + "/new_theme" }}" method="POST">
                <h1>Create a new Theme</h1>
                <label for="theme-name">
                  <h2>Theme Name</h2>
                </label>
                <input type="text"
                       id="theme-name"
                       name="theme-name"
                       placeholder="Theme Name"
                       required/>
                <label for="theme-accent">
                    <h2>Accent Color</h2>
                </label>
                <input type="color"
                       id="theme-accent"
                       name="accent-color"
                       value="#000000"
                       required/>
                <label for="theme-primary">
                    <h2>Primary Color</h2>
                </label>
                <input type="color"
                       id="theme-primary"
                       name="primary-color"
                       value="#000000"
                       required/>
                <label for="line-spacing">
                    <h2>Line Spacing</h2>
                </label>
                <input type="number"
                       id="line-spacing"
                       name="line-spacing"
                       value="1"
                       step="0.05"
                       required/>
                <button type="submit" id="create-server">Create Theme</button>
                <button type="button"
                        id="cancel-server"
                        onclick="document.getElementById('theme-modal').style.display='none'">
                  Cancel
                </button>
              </form>
        </div>
    </div>
        {% with messages = get_flashed_messages() %}
            {% if messages %}
                <div id="hideondelay" class="flash">
                    {% for message in messages %}<p>{{ message }}</p>{% endfor %}
                </div>
            {% endif %}
        {% endwith %}
        {% include "profile-sidebar.html" %}
        <div style="width: 80%;">
            <div class="top-divider" style="border: none; margin: 0;"><h1>My Themes<h1></div>
            <div style="max-height: 70%; overflow-x: hidden; filter: brightness(0.8);">
            {% for theme in themes %}
            <div class="entry">
                <div class="top-divider" id="{{ theme['name'] }}">
                    <h1>{{ theme['name'] }}</h1>
                </div>
                <div class="details" style="display: flex; flex-direction: row; justify-content: space-between;">
                    <div class="labels">                    
                        <p>Text Size: {{ theme['text_size'] }}</p>
                        <p>Theme Color: {{ theme['primary_color'] }}</p>
                        <p>Accent Color: {{ theme['accent_color'] }}</p>
                        <p>Line Spacing: {{ theme['line_spacing'] }}</p>
                    </div>
                    <div>
                        <form action={{ "/profiles/" + uid + "/themes" }} method="POST">
                            <input style="display: none;" type="text" name="theme" value="{{ theme['name'] }}"/>
                            <button type="submit">Select Theme</button>
                        </form>
                        <button onclick="window.location.href = '{{ url_for('edit_theme', uid=request.cookies.get['uid'], theme_name=theme['name']) }}'">Edit</button>
                    </div>

                </div>
            </div>
            {% endfor %}
        </div>
            <div class="bottom-divider" style="border: none; margin: 0;">
                <button onclick="document.getElementById('theme-modal').style.display='block'">Create Theme</button>
            </div>
        </div>
        
        </body>
